-- @Description Tests the status for pg_endpoints AND GP_ENDPOINTS_STATUS_INFO()
--
DROP TABLE IF EXISTS t1;
DROP
CREATE TABLE t1 (a INT) DISTRIBUTED by (a);
CREATE
insert into t1 select generate_series(1,100);
INSERT 100

--------- Test1: Basic test for parallel retrieve interface & close cursor
1: BEGIN;
BEGIN
1: DECLARE c1 PARALLEL RETRIEVE CURSOR FOR SELECT * FROM t1;
DECLARE
1: @out_sh 'parse_endpoint 1 1 2 3 4' : SELECT endpointname,token,hostname,port,status FROM gp_endpoints_info(true) WHERE cursorname='c2';
 endpointname         | token                              | hostname    | port  | status
----------------------+------------------------------------+-------------+-------+--------
 endpoint_id1_1 | token_id1 | host_id | port_id_1 | READY
 endpoint_id1_2 | token_id1 | host_id | port_id_2 | READY
 endpoint_id1_3 | token_id1 | host_id | port_id_3 | READY
(3 rows)
